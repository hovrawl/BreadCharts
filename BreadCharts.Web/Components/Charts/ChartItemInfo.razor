@using BreadCharts.Core.Models
@using BreadCharts.Core.Services


<FluentStack Orientation="Orientation.Horizontal" Class="overflow-y">
    @if (ChartOption != null)
    {
        <FluentStack Orientation="Orientation.Vertical" Style="min-width: 320px;">
            <b>@ChartOption.Name</b>
            <br />
            @if (ChartOption.Type == ChartOptionType.Track)
            {
                <ChartTrackInfo ChartOption="@ChartOption" />
            }
            else
            {
                <BreadCharts.Web.Components.Charts.Infos.ChartNavigableInfo Model="@ChartOption" OnSelect="@HandleSelect" />
            }
        </FluentStack>

        @if (SelectedTrack is not null)
        {
            <FluentStack Orientation="Orientation.Vertical" Style="min-width: 320px;">
                <b>Selected Track</b>
                <ChartTrackInfo ChartOption="@SelectedTrack" />
            </FluentStack>
        }
    }
</FluentStack>

@code {
    [Parameter] public ChartOption ChartOption { get; set; } = default!;

    private ChartOption? SelectedTrack;

    private Task HandleSelect(ChartOption option)
    {
        if (option.Type == ChartOptionType.Track)
        {
            SelectedTrack = option;
            StateHasChanged();
        }
        return Task.CompletedTask;
    }
}